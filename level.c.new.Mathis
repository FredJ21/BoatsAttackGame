#include <SDL.h>
#include <SDL_ttf.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "config.h"
#include "level.h"
#include "Algo_A_star.h"


/*****************************************************************
*****************************************************************/
void init_level (t_level *pLevel, int level_number, SDL_Surface *pSurface_Tuile, SDL_Renderer *pRenderer) {

    int a, x, y;
    int map_size = MAP_NB_TILE_X * MAP_NB_TILE_Y;
    SDL_Rect Rect_source = { 0, 0, TILE_TAILLE_X, TILE_TAILLE_Y};
    SDL_Rect Rect_Dest   = { 0, 0, TILE_TAILLE_X, TILE_TAILLE_Y};

    SDL_Surface *pSurface_TMP;
    pSurface_TMP = SDL_CreateRGBSurface(0,MAP_TAILLE_X,MAP_TAILLE_Y,32,0,0,0,0);

    /******************************************************************************************************************
                                                DATA MAP
    *******************************************************************************************************************/
    int map[LEVEL_NB_TOTAL][MAP_NB_TILE_X * MAP_NB_TILE_Y] = {
        { // level 1
        34,34,34,34,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        417,417,34,417,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,34,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,34,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,34,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,34,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,417,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,487,487,487,487,444,446,487,487,487,487,487,487,487,487,444,446,487,487,487,487,487,487,487,487,444,446,487,487,487,487,
        487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,
        487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,
        487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,
        444,445,446,487,487,487,467,469,487,487,487,444,446,487,487,487,467,469,487,487,487,444,446,487,487,487,467,469,487,487,487,487,
        467,143,469,487,487,487,490,492,487,487,487,467,469,487,487,487,490,492,487,487,487,467,469,487,487,487,490,492,487,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,467,469,487,487,487,487,487,487,487,487,487,
        490,491,492,487,487,487,487,487,487,487,487,490,492,487,487,487,487,487,487,487,487,490,492,487,487,487,487,487,487,487,487,487,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74
        },
        { // level 2
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,444,445,445,445,445,445,445,445,445,445,445,445,445,446,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,467,143,143,143,143,143,143,143,143,143,143,143,143,469,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,467,143,143,143,143,143,143,143,143,143,143,143,143,469,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,490,491,491,491,491,491,491,491,491,491,491,491,491,492,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,444,445,445,445,445,445,445,445,445,445,445,445,445,446,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,467,143,143,143,143,143,143,143,143,143,143,143,143,469,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,467,143,143,143,143,143,143,143,143,143,143,143,143,469,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,490,491,491,491,491,491,491,491,491,491,491,491,491,492,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487
        },
        { // level 3
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,444,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,446,487,
        487,487,490,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,512,469,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,467,469,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,467,469,487,
        487,487,444,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,445,558,469,487,
        487,487,490,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,491,492,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74
        },
        { // level 4
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,444,445,446,487,487,444,445,446,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,444,445,445,445,445,445,558,143,469,487,487,467,143,556,445,445,445,445,445,446,487,487,489,489,489,489,
        489,489,489,489,487,487,467,143,143,143,143,143,143,143,469,487,487,467,143,143,143,143,143,143,143,469,487,487,489,489,489,489,
        489,489,489,489,487,487,490,491,491,491,491,491,491,491,492,487,487,490,491,491,491,491,491,491,491,492,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,444,445,445,445,445,445,445,445,446,487,487,444,445,445,445,445,445,445,445,446,487,487,489,489,489,489,
        489,489,489,489,487,487,467,143,143,143,143,143,143,143,469,487,487,467,143,143,143,143,143,143,143,469,487,487,489,489,489,489,
        489,489,489,489,487,487,490,491,491,491,491,491,512,143,469,487,487,467,143,510,491,491,491,491,491,492,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,467,143,469,487,487,467,143,469,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,490,491,492,487,487,490,491,492,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489,
        489,489,489,489,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,487,489,489,489,489
        },
        { // level 5
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,74,74,74,74,487,487,444,445,446,487,487,74,74,74,74,74,74,487,487,444,445,446,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,444,446,487,487,444,446,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,467,469,487,487,467,469,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,467,469,487,487,467,469,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,490,492,487,487,490,492,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,74,74,487,487,467,143,469,487,487,74,74,74,74,487,487,
        487,487,74,74,74,74,487,487,490,491,492,487,487,74,74,74,74,74,74,487,487,490,491,492,487,487,74,74,74,74,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,487,487,487,487,487,487,487,74,74,74,74,74,74,487,487,487,487,487,487,487,487,487,487,487,487,48
        },
        { // level 6
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        487,487,487,487,487,487,444,445,446,487,487,487,487,487,487,487,487,487,487,444,445,446,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,
        487,487,487,487,487,487,490,491,492,487,487,487,487,487,487,487,487,487,487,490,491,492,487,487,487,487,487,487,487,487,487,487,
        444,445,446,487,487,487,487,487,487,487,487,487,487,444,445,446,487,487,487,487,487,487,487,487,487,487,444,445,446,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,
        467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,
        467,143,469,487,487,487,444,445,446,487,487,487,487,490,491,492,487,487,487,444,445,446,487,487,487,487,490,491,492,487,487,487,
        467,143,469,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,467,143,469,487,487,487,487,487,487,487,487,487,487,
        490,491,492,487,487,487,490,491,492,487,487,487,487,487,487,487,487,487,487,490,491,492,487,487,487,487,487,487,487,487,487,487,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,
        74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74,74
        }
    };

    int StartPos[LEVEL_NB_TOTAL][8] = { /** positions de depart des ennemis , couple start/end
          Haut                      Droite                                          Bas                         Gauche   **/
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 },                            // level 1
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 },                            // level 2
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 },                            // level 3
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 },                            // level 4
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 },                            // level 5
        { 0, 0,                     MAP_TAILLE_Y/2 - 50, MAP_TAILLE_Y/2 + 50,     0, 0,                       0, 0 }                            // level 6
    };

    int cible[LEVEL_NB_TOTAL][2] = {        /** position de la cible en X et Y **/
        { 5, 11 },           // level 1
        { 5, 11 },           // level 2
        { 5, 11 },           // level 3
        { 5, 11 },           // level 4
        { 5, 11 },           // level 5
        { 5, 11 }           // level 6
    };

    char name [LEVEL_NB_TOTAL][256] = {
        { "LEVEL 1" },
        { "LEVEL 2" },
        { "LEVEL 3" },
        { "LEVEL 4" },
        { "LEVEL 5" },
        { "LEVEL 6" }
    };

    int wave[LEVEL_NB_TOTAL][WAVE_NB * WAVE_nb_variable_struct_wave] = {    /** definition des vagues d'attack
          type, Nb_up, Nb_right, Nb_Down, Nb_left, délais avant départ  **/
        {   // level 1
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        },
        {   // level 2
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        },
        {   // level 3
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        },
        {   // level 4
          /** type,   Nb_up,   Nb_right,   Nb_Down,   Nb_left,   délai avant départ  **/
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        },
        {   // level 5
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        },
        {   // level 6
            0,  0, 10,  0,  0,  3,          // wave 1
            1,  0, 10,  0,  0,  15,
            2,  0, 10,  0,  0,  30,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0,
            0,  0,  0,  0,  0,  0            // wave 10
        }
    };

    /******************************************************************************************************************
                                                DATA COPY
    *******************************************************************************************************************/
    // DATA de la map
    for (a = 0 ; a < map_size; a++) {
        pLevel->my_map[a] = map[level_number][a];
    }

    pLevel->StartPos_UP_s    =  StartPos[level_number][0];
    pLevel->StartPos_UP_e    =  StartPos[level_number][1];
    pLevel->StartPos_RIGHT_s =  StartPos[level_number][2];
    pLevel->StartPos_RIGHT_e =  StartPos[level_number][3];
    pLevel->StartPos_DOWN_s  =  StartPos[level_number][4];
    pLevel->StartPos_DOWN_e  =  StartPos[level_number][5];
    pLevel->StartPos_LEFT_s  =  StartPos[level_number][6];
    pLevel->StartPos_LEFT_e  =  StartPos[level_number][7];

    pLevel->cibleX = cible[level_number][0];
    pLevel->cibleY = cible[level_number][1];

    strcpy(pLevel->name, name[level_number]);

    // DATA des attacks
    for (a = 0 ; a < WAVE_NB; a++) {
        pLevel->wave[a].type     =  wave[level_number][a*WAVE_nb_variable_struct_wave + 0];
        pLevel->wave[a].nb_up    =  wave[level_number][a*WAVE_nb_variable_struct_wave + 1];
        pLevel->wave[a].nb_right =  wave[level_number][a*WAVE_nb_variable_struct_wave + 2];
        pLevel->wave[a].nb_down  =  wave[level_number][a*WAVE_nb_variable_struct_wave + 3];
        pLevel->wave[a].nb_left  =  wave[level_number][a*WAVE_nb_variable_struct_wave + 4];
        pLevel->wave[a].start_in =  wave[level_number][a*WAVE_nb_variable_struct_wave + 5];
    }

    /******************************************************************************************************************
                                        - Creation de la texture de la map
                                        - Creation de la des obstacles
                                        - Remise à zero de mapDirection
    *******************************************************************************************************************/
    a = 0;
    for (y = 0; y < MAP_NB_TILE_Y; y++ ) {
        for (x = 0; x < MAP_NB_TILE_X; x++ ) {

            Rect_source.y = (pLevel->my_map[a]-1) / TILE_FILE_NB_COLONNE  * (TILE_TAILLE_Y + 1) + 1;
            Rect_source.x = ((pLevel->my_map[a]-1) % TILE_FILE_NB_COLONNE)  * (TILE_TAILLE_Y + 1) + 1;

            Rect_Dest.x = x * TILE_TAILLE_X;
            Rect_Dest.y = y * TILE_TAILLE_Y;

            SDL_BlitSurface(pSurface_Tuile, &Rect_source, pSurface_TMP, &Rect_Dest);

            //printf("x=%d - y=%d - val=%d - valx=%d - valy=%d\n ", x, y, pLevel->my_map[a], Rect_source.x, Rect_source.y );


            // creation du tableau des obstacles
            if ( pLevel->my_map[a] == 369 ||
                    pLevel->my_map[a] == 370 ||
                    pLevel->my_map[a] == 371 ||
                    pLevel->my_map[a] == 372 ||
                    pLevel->my_map[a] == 375 ||
                    pLevel->my_map[a] == 376 ||
                    pLevel->my_map[a] == 377 ||
                    pLevel->my_map[a] == 381 ||
                    pLevel->my_map[a] == 398 ||
                    pLevel->my_map[a] == 400 ||
                    pLevel->my_map[a] == 421 ||
                    pLevel->my_map[a] == 422 ||
                    pLevel->my_map[a] == 423 ||
                    pLevel->my_map[a] == 433 ||
                    pLevel->my_map[a] == 440 ||
                    pLevel->my_map[a] == 441 ||
                    pLevel->my_map[a] == 443 ||
                    pLevel->my_map[a] == 463 ||
                    pLevel->my_map[a] == 464 ||
                    pLevel->my_map[a] == 466 ||
                    pLevel->my_map[a] == 486 ||
                    pLevel->my_map[a] == 487 ||
                    pLevel->my_map[a] == 499 ||
                    pLevel->my_map[a] == 489 ) {
                // ce n'est pas obstacle
                pLevel->map_Info[x][y] = LIBRE;
            } else {
                // c'est un obstacle
                pLevel->map_Info[x][y] = OBSTACLE;
            }


            pLevel->map_Direction[x][y] = INCONNU;
            a++;
        }
    }


    pLevel->pTexture_MAP = SDL_CreateTextureFromSurface(pRenderer, pSurface_TMP);
    if(!pLevel->pTexture_MAP) {                         printf( "SDL_Texture_MAP ERREUR! SDL_GetError: %s\n", SDL_GetError() ); exit (-1);}


    SDL_FreeSurface(pSurface_TMP);
}
/*****************************************************************
*****************************************************************/
void init_level_chemins     (t_level *pLevel) {

    int x, y;

    for (y = 1; y < MAP_NB_TILE_Y; y++){
        x = 0;
        if ( pLevel->map_Info[x][y] == LIBRE ) {    calcul_chemin(x, y, pLevel);    }
        x = MAP_NB_TILE_X - 1;
        if ( pLevel->map_Info[x][y] == LIBRE ) {    calcul_chemin(x, y, pLevel);    }
    }
    for (x = 1; x < MAP_NB_TILE_X; x++ ) {
        y = 0;
        if ( pLevel->map_Info[x][y] == LIBRE ) {    calcul_chemin(x, y, pLevel);    }
        y = MAP_NB_TILE_Y - 1;
        if ( pLevel->map_Info[x][y] == LIBRE ) {    calcul_chemin(x, y, pLevel);    }
    }
}
/*****************************************************************
*****************************************************************/
void init_level_titre       (SDL_Renderer *pRenderer, t_level *pLevel, TTF_Font *police) {


    SDL_Surface *texte = NULL;
    SDL_Color couleur = {200, 100, 100, 0};

    texte = TTF_RenderText_Blended(police, pLevel->name, couleur);
    pLevel->Titre_position_src.x = 0;
    pLevel->Titre_position_src.y = 0;
    pLevel->Titre_position_src.h = texte->h;
    pLevel->Titre_position_src.w = texte->w;
    pLevel->Titre_position_dst.x = (MAP_TAILLE_X - texte->w)/2;
    pLevel->Titre_position_dst.y = (MAP_TAILLE_Y - texte->h*2)/2;
    pLevel->Titre_position_dst.h = texte->h;
    pLevel->Titre_position_dst.w = texte->w;

    // Création de la texture pour le texte
    pLevel->pTexture_MAP_Titre = SDL_CreateTextureFromSurface(pRenderer, texte);
    if(!pLevel->pTexture_MAP_Titre) {                  printf( "SDL_Texture ERREUR! SDL_GetError: %s\n", SDL_GetError() ); exit(-1);}

    SDL_FreeSurface(texte);

}
/*****************************************************************
*****************************************************************/
void clear_level            (t_level *pLevel) {

    SDL_DestroyTexture(pLevel->pTexture_MAP);
    SDL_DestroyTexture(pLevel->pTexture_MAP_Titre);
    SDL_DestroyTexture(pLevel->pTexture_MAP_Obstacles);

}
/*****************************************************************
*****************************************************************/
void affiche_map            (SDL_Renderer *pRenderer, t_level *pLevel) {

    SDL_RenderCopy (pRenderer, pLevel->pTexture_MAP, NULL, NULL);
}
/*****************************************************************
*****************************************************************/
void affiche_titre          (SDL_Renderer *pRenderer, t_level *p) {

       SDL_RenderCopy      (pRenderer, p->pTexture_MAP_Titre,  &p->Titre_position_src, &p->Titre_position_dst);

}
/*****************************************************************
*****************************************************************/
void init_texture_obstacle  (SDL_Renderer *pRenderer, t_level *pLevel) {

    int x, y;
    SDL_Rect Rect_Dest   = { 0, 0, TILE_TAILLE_X, TILE_TAILLE_Y};
    SDL_Surface *pSurface_CroixRouge;
    SDL_Surface *pSurface_TMP;

    // charge l'image
    pSurface_CroixRouge = SDL_LoadBMP ( "images/CroixRouge32x32.bmp" );
            if(!pSurface_CroixRouge) { printf( "LOAD BMP ERROR : %s\n", SDL_GetError() ); exit(1);}

    // création d'une surface temporaire de la taille de la map
    pSurface_TMP = SDL_CreateRGBSurface(0,MAP_TAILLE_X,MAP_TAILLE_Y,32,0,0,0,0);


    // creation de la texture MAP_Obstacle
    for (y = 0; y < MAP_NB_TILE_Y; y++ ) {
        for (x = 0; x < MAP_NB_TILE_X; x++ ) {

            if ( pLevel->map_Info[x][y] == OBSTACLE) {

                Rect_Dest.x = x * TILE_TAILLE_X;
                Rect_Dest.y = y * TILE_TAILLE_Y;
                SDL_BlitSurface(pSurface_CroixRouge, NULL, pSurface_TMP, &Rect_Dest);
            }
        }
    }

    SDL_SetColorKey(pSurface_TMP, SDL_TRUE, SDL_MapRGB(pSurface_TMP->format, 0, 0, 0));


    pLevel->pTexture_MAP_Obstacles = SDL_CreateTextureFromSurface(pRenderer, pSurface_TMP);
        if(!pLevel->pTexture_MAP_Obstacles) { printf( "SDL_Texture_MAP ERREUR! SDL_GetError: %s\n", SDL_GetError() ); exit (-1);}


   SDL_FreeSurface(pSurface_CroixRouge);
   SDL_FreeSurface(pSurface_TMP);
}
/*****************************************************************
*****************************************************************/
void affiche_obstacle       (SDL_Renderer *pRenderer, t_level *pLevel) {

    SDL_RenderCopy (pRenderer, pLevel->pTexture_MAP_Obstacles, NULL, NULL);

}
/*****************************************************************
*****************************************************************/
void affiche_map_console    (t_level *pLevel) {

    int x, y;

    for (y = 0; y < MAP_NB_TILE_Y; y++){
        for (x = 0; x < MAP_NB_TILE_X; x++) {

           if ( pLevel->map_Info[x][y] == OBSTACLE) {
                printf (".");
            } else if ( pLevel->map_Direction[x][y] == VERS_LE_HAUT) {
                printf ("^");
            } else if ( pLevel->map_Direction[x][y] == VERS_LA_DROITE) {
                printf (">");
            } else if ( pLevel->map_Direction[x][y] == VERS_LE_BAS) {
                printf ("v");
            } else if ( pLevel->map_Direction[x][y] == VERS_LA_GAUCHE) {
                printf ("<");
            } else {
                printf (" ");
            }
        }
        printf ("\n");
    }
    printf ("\n");
}

